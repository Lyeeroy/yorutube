<div>
  <h2 class="text-2xl font-bold text-white mb-4">{{ title() }}</h2>
  @if (loading()) {
  <div class="flex space-x-4 sm:space-x-6 overflow-hidden">
    @for (item of [1,2,3,4,5,6]; track item) {
    <div
      class="animate-pulse w-5/6 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 shrink-0"
    >
      <div class="bg-zinc-800 rounded-xl aspect-video"></div>
      <div class="flex items-start space-x-3 mt-3">
        <div class="h-9 w-9 rounded-full bg-zinc-800 shrink-0"></div>
        <div class="min-w-0 flex-1 space-y-2">
          <div class="h-4 bg-zinc-800 rounded w-full"></div>
          <div class="h-3 bg-zinc-800 rounded w-3/4"></div>
        </div>
      </div>
    </div>
    }
  </div>
  } @else {
  <div class="relative group/slider">
    @if (canScrollLeft()) {
    <button
      (click)="scroll('left')"
      aria-label="Scroll left"
      class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 z-10 bg-black/60 backdrop-blur-sm rounded-full w-12 h-12 hidden md:flex items-center justify-center text-white hover:bg-black/80 transition-opacity opacity-0 focus:opacity-100 focus:outline-none"
      [class.group-hover/slider:opacity-100]="!isTouch"
      [class.opacity-100]="isTouch"
    >
      <span class="material-symbols-outlined">chevron_left</span>
    </button>
    }

    <div
      #scrollContainer
      (scroll)="checkScroll()"
      (mousedown)="onMouseDown($event)"
      (mouseleave)="onMouseLeave()"
      (mouseup)="onMouseUp()"
      (mousemove)="onMouseMove($event)"
      class="flex overflow-x-auto space-x-4 sm:space-x-6 pb-24 -mb-24"
      [class.cursor-grabbing]="isGrabbing()"
      [class.select-none]="isGrabbing()"
      style="scrollbar-width: none; -ms-overflow-style: none"
    >
      @for (item of media(); track item.id; let i = $index) {
      <div class="w-5/6 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 shrink-0">
        <app-video-card
          [media]="item"
          [genreMap]="genreMap()"
          [isPriority]="isPriorityCategory() && i < 6"
          (mediaClicked)="onMediaClicked(item)"
        ></app-video-card>
      </div>
      }
    </div>

    @if (canScrollRight()) {
    <button
      (click)="scroll('right')"
      aria-label="Scroll right"
      class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/2 z-10 bg-black/60 backdrop-blur-sm rounded-full w-12 h-12 hidden md:flex items-center justify-center text-white hover:bg-black/80 transition-opacity opacity-0 focus:opacity-100 focus:outline-none"
      [class.group-hover/slider:opacity-100]="!isTouch"
      [class.opacity-100]="isTouch"
    >
      <span class="material-symbols-outlined">chevron_right</span>
    </button>
    }
  </div>
  }
</div>
